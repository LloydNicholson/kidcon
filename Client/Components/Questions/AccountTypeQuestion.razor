@inject IAccountService AccountService

@if (Account != null)
{
    <div class="row">
        <div class="col-3">
            <h3>@Account.Name</h3>
        </div>
        <div class="col-3">
            <select class="form-control" @bind="@TypeChosen">
                <option value="asset">Asset</option>
                <option value="drawings">Drawings</option>
                <option value="expense">Expense</option>
                <option value="capital">Capital</option>
                <option value="income">Income</option>
                <option value="liability">Liability</option>
            </select>
        </div>
        <div class="col-3 d-flex">
            @if (DidAnswer)
            {
                @if (Correct)
                {
                    <div class="align-self-center">
                        <i class="oi oi-thumb-up" />
                        <span>Correct!</span>
                    </div>
                }
                else
                {
                    <div class="align-self-center">
                        <i class="oi oi-thumb-down" />
                        <span>Incorrect. Try another!</span>
                    </div>
                }
            }
        </div>
        <div class="col-3 d-flex justify-content-end">
            <button class="btn btn-primary" @onclick="Answered">Submit</button>
        </div>
    </div>
}

@code {
    public Account Account { get; set; }
    public string TypeChosen { get; set; } = "asset";
    public bool Correct { get; set; }
    public bool DidAnswer { get; set; } = false;

    protected async override Task OnInitializedAsync()
    {
        await GetAccount();
    }

    public async Task GetAccount()
    {
        Account = await AccountService.GetRandomAccount();
    }

    public async Task Answered()
    {
        DidAnswer = true;
        if (TypeChosen.Equals(Account.Classification.Type, StringComparison.CurrentCultureIgnoreCase))
        {
            Correct = true;
            await GetAccount();
        }
        else
        {
            Correct = false;
        }
    }
}
